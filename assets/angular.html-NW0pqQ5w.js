import{_ as i,r as e,o as r,c as u,b as s,w as p,d as n,e as a,a as o}from"./app-eF4imkDp.js";const d={},k=o(`<h1 id="angular" tabindex="-1"><a class="header-anchor" href="#angular"><span>Angular</span></a></h1><p>æœ¬ç¯‡ä»¥<code>angular 11</code>ä½œä¸ºæ¡ˆä¾‹ä»‹ç»angularçš„æ¥å…¥æ–¹å¼ï¼Œå…¶å®ƒç‰ˆæœ¬angularæ¥å…¥æ–¹å¼ä¼šåœ¨åç»­è¡¥å……ï¼Œå¦‚æœä½ åœ¨ä½¿ç”¨æ—¶å‡ºç°é—®é¢˜ï¼Œè¯·åœ¨githubä¸Šæissueå‘ŠçŸ¥æˆ‘ä»¬ã€‚</p><h2 id="ä½œä¸ºä¸»åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#ä½œä¸ºä¸»åº”ç”¨"><span>ä½œä¸ºä¸»åº”ç”¨</span></a></h2><h4 id="_1ã€å®‰è£…ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_1ã€å®‰è£…ä¾èµ–"><span>1ã€å®‰è£…ä¾èµ–</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> i @micro-zoe/micro-app <span class="token parameter variable">--save</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_2ã€åˆå§‹åŒ–micro-app" tabindex="-1"><a class="header-anchor" href="#_2ã€åˆå§‹åŒ–micro-app"><span>2ã€åˆå§‹åŒ–micro-app</span></a></h4><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// main.ts</span>
<span class="token keyword">import</span> microApp <span class="token keyword">from</span> <span class="token string">&#39;@micro-zoe/micro-app&#39;</span>

microApp<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3ã€å¢åŠ å¯¹webcomponentçš„æ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#_3ã€å¢åŠ å¯¹webcomponentçš„æ”¯æŒ"><span>3ã€å¢åŠ å¯¹WebComponentçš„æ”¯æŒ</span></a></h4><p>åœ¨<code>app/app.module.ts</code>ä¸­æ·»åŠ  <code>CUSTOM_ELEMENTS_SCHEMA</code> åˆ° @NgModule.schemas</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// app/app.module.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NgModule<span class="token punctuation">,</span> <span class="token constant">CUSTOM_ELEMENTS_SCHEMA</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@angular/core&#39;</span><span class="token punctuation">;</span>

@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">schemas</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">CUSTOM_ELEMENTS_SCHEMA</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4ã€åœ¨é¡µé¢ä¸­åµŒå…¥å­åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#_4ã€åœ¨é¡µé¢ä¸­åµŒå…¥å­åº”ç”¨"><span>4ã€åœ¨é¡µé¢ä¸­åµŒå…¥å­åº”ç”¨</span></a></h4><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token comment">&lt;!-- app/my-page/my-page.component.html --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>å­åº”ç”¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- nameï¼šåº”ç”¨åç§°, urlï¼šåº”ç”¨åœ°å€ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>micro-app</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>my-app<span class="token punctuation">&#39;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>http://localhost:3000/<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>micro-app</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container note"><p class="custom-container-title">Note</p><ol><li>nameï¼šå¿…ä¼ å‚æ•°ï¼Œå¿…é¡»ä»¥å­—æ¯å¼€å¤´ï¼Œä¸”ä¸å¯ä»¥å¸¦ç‰¹æ®Šç¬¦å·(ä¸­åˆ’çº¿ã€ä¸‹åˆ’çº¿é™¤å¤–)</li><li>urlï¼šå¿…ä¼ å‚æ•°ï¼Œå¿…é¡»æŒ‡å‘å­åº”ç”¨çš„index.htmlï¼Œå¦‚ï¼šhttp://localhost:3000/ æˆ– http://localhost:3000/index.html</li></ol></div><h2 id="ä½œä¸ºå­åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#ä½œä¸ºå­åº”ç”¨"><span>ä½œä¸ºå­åº”ç”¨</span></a></h2><h4 id="_1ã€åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥zone-js" tabindex="-1"><a class="header-anchor" href="#_1ã€åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥zone-js"><span>1ã€åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥<code>zone.js</code></span></a></h4><p>å¦‚æœä¸»åº”ç”¨éangularï¼Œé‚£ä¹ˆä¸»åº”ç”¨éœ€è¦å¼•å…¥<code>zone.js</code>æ‰èƒ½æ­£ç¡®åŠ è½½angularå­åº”ç”¨ã€‚</p><p>æ­¥éª¤1ã€å®‰è£…ä¾èµ–</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>npm i zone.js --save
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ­¥éª¤2ã€åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥zone.js</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&#39;zone.js&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_2ã€è®¾ç½®è·¨åŸŸæ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#_2ã€è®¾ç½®è·¨åŸŸæ”¯æŒ"><span>2ã€è®¾ç½®è·¨åŸŸæ”¯æŒ</span></a></h4><p>angularå®˜æ–¹è„šæ‰‹æ¶åˆ›å»ºçš„é¡¹ç›®åœ¨å¼€å‘ç¯å¢ƒä¸‹é»˜è®¤æ”¯æŒè·¨åŸŸè®¿é—®ï¼Œä¸éœ€è¦ç‰¹æ®Šå¤„ç†ã€‚</p><p>å…¶å®ƒé¡¹ç›®åœ¨<code>webpack-dev-server</code>ä¸­æ·»åŠ headersã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&#39;Access-Control-Allow-Origin&#39;</span><span class="token operator">:</span> <span class="token string">&#39;*&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3ã€ç›‘å¬å¸è½½äº‹ä»¶" tabindex="-1"><a class="header-anchor" href="#_3ã€ç›‘å¬å¸è½½äº‹ä»¶"><span>3ã€ç›‘å¬å¸è½½äº‹ä»¶</span></a></h4><p>å­åº”ç”¨è¢«å¸è½½æ—¶ä¼šæ¥å—åˆ°ä¸€ä¸ªåä¸º<code>unmount</code>çš„äº‹ä»¶ï¼Œåœ¨æ­¤å¯ä»¥è¿›è¡Œå¸è½½ç›¸å…³æ“ä½œã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// main.ts</span>
<span class="token keyword">let</span> <span class="token literal-property property">app</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">|</span> NgModuleRef<span class="token operator">&lt;</span>AppModule<span class="token operator">&gt;</span>
<span class="token function">platformBrowserDynamic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">bootstrapModule</span><span class="token punctuation">(</span>AppModule<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">res</span><span class="token operator">:</span> NgModuleRef<span class="token operator">&lt;</span>AppModule<span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    app <span class="token operator">=</span> res
  <span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// ç›‘å¬å¸è½½æ“ä½œ</span>
window<span class="token punctuation">.</span><span class="token function-variable function">unmount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  app <span class="token operator">&amp;&amp;</span> app<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  app <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®Œæˆä»¥ä¸Šæ­¥éª¤å¾®å‰ç«¯å³å¯æ­£å¸¸æ¸²æŸ“ã€‚</p><h3 id="å¯é€‰è®¾ç½®" tabindex="-1"><a class="header-anchor" href="#å¯é€‰è®¾ç½®"><span>å¯é€‰è®¾ç½®</span></a></h3><p>ä»¥ä¸‹é…ç½®æ˜¯é’ˆå¯¹å­åº”ç”¨çš„ï¼Œå®ƒä»¬æ˜¯å¯é€‰çš„ï¼Œå»ºè®®æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©è®¾ç½®ã€‚</p><h4 id="_1ã€å¼€å¯umdæ¨¡å¼-ä¼˜åŒ–å†…å­˜å’Œæ€§èƒ½" tabindex="-1"><a class="header-anchor" href="#_1ã€å¼€å¯umdæ¨¡å¼-ä¼˜åŒ–å†…å­˜å’Œæ€§èƒ½"><span>1ã€å¼€å¯umdæ¨¡å¼ï¼Œä¼˜åŒ–å†…å­˜å’Œæ€§èƒ½</span></a></h4><p>MicroAppæ”¯æŒä¸¤ç§æ¸²æŸ“å¾®å‰ç«¯çš„æ¨¡å¼ï¼Œé»˜è®¤æ¨¡å¼å’Œumdæ¨¡å¼ã€‚</p><ul><li><strong>é»˜è®¤æ¨¡å¼ï¼š</strong> å­åº”ç”¨åœ¨åˆæ¬¡æ¸²æŸ“å’Œåç»­æ¸²æŸ“æ—¶ä¼šé¡ºåºæ‰§è¡Œæ‰€æœ‰jsï¼Œä»¥ä¿è¯å¤šæ¬¡æ¸²æŸ“çš„ä¸€è‡´æ€§ã€‚</li><li><strong>umdæ¨¡å¼ï¼š</strong> å­åº”ç”¨æš´éœ²å‡º<code>mount</code>ã€<code>unmount</code>æ–¹æ³•ï¼Œæ­¤æ—¶åªåœ¨åˆæ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œæ‰€æœ‰jsï¼Œåç»­æ¸²æŸ“åªä¼šæ‰§è¡Œè¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œåœ¨å¤šæ¬¡æ¸²æŸ“æ—¶å…·æœ‰æ›´å¥½çš„æ€§èƒ½å’Œå†…å­˜è¡¨ç°ã€‚</li></ul><p>å¦‚æœå­åº”ç”¨æ¸²æŸ“å’Œå¸è½½ä¸é¢‘ç¹ï¼Œé‚£ä¹ˆä½¿ç”¨é»˜è®¤æ¨¡å¼å³å¯ï¼Œå¦‚æœå­åº”ç”¨æ¸²æŸ“å’Œå¸è½½éå¸¸é¢‘ç¹å»ºè®®ä½¿ç”¨umdæ¨¡å¼ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// main.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NgModuleRef  <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@angular/core&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> platformBrowserDynamic <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@angular/platform-browser-dynamic&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./app/app.module&#39;</span><span class="token punctuation">;</span>

declare global <span class="token punctuation">{</span>
  <span class="token keyword">interface</span> <span class="token class-name">Window</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">microApp</span><span class="token operator">:</span> any
    <span class="token literal-property property">mount</span><span class="token operator">:</span> CallableFunction
    <span class="token literal-property property">unmount</span><span class="token operator">:</span> CallableFunction
    <span class="token literal-property property">__MICRO_APP_ENVIRONMENT__</span><span class="token operator">:</span> string
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token literal-property property">app</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">|</span> NgModuleRef<span class="token operator">&lt;</span>AppModule<span class="token operator">&gt;</span>
<span class="token comment">// ğŸ‘‡ å°†æ¸²æŸ“æ“ä½œæ”¾å…¥ mount å‡½æ•°ï¼Œå­åº”ç”¨åˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œ</span>
window<span class="token punctuation">.</span><span class="token function-variable function">mount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">platformBrowserDynamic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">bootstrapModule</span><span class="token punctuation">(</span>AppModule<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">res</span><span class="token operator">:</span> NgModuleRef<span class="token operator">&lt;</span>AppModule<span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      app <span class="token operator">=</span> res
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// ğŸ‘‡ å°†å¸è½½æ“ä½œæ”¾å…¥ unmount å‡½æ•°ï¼Œå°±æ˜¯ä¸Šé¢æ­¥éª¤2ä¸­çš„å¸è½½å‡½æ•°</span>
window<span class="token punctuation">.</span><span class="token function-variable function">unmount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// angularåœ¨éƒ¨åˆ†åœºæ™¯ä¸‹æ‰§è¡Œdestroyæ—¶ä¼šåˆ é™¤æ ¹å…ƒç´ app-rootï¼Œå¯¼è‡´åœ¨æ­¤æ¸²æŸ“æ—¶æŠ¥é”™ï¼Œæ­¤æ—¶å¯åˆ é™¤app.destroy()æ¥é¿å…è¿™ä¸ªé—®é¢˜</span>
  app <span class="token operator">&amp;&amp;</span> app<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  app <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¦‚æœä¸åœ¨å¾®å‰ç«¯ç¯å¢ƒï¼Œåˆ™ç›´æ¥æ‰§è¡Œmountæ¸²æŸ“</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>__MICRO_APP_ENVIRONMENT__<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2ã€è®¾ç½®-webpack-jsonpfunction" tabindex="-1"><a class="header-anchor" href="#_2ã€è®¾ç½®-webpack-jsonpfunction"><span>2ã€è®¾ç½® webpack.jsonpFunction</span></a></h4><p>å¦‚æœå¾®å‰ç«¯æ­£å¸¸è¿è¡Œï¼Œåˆ™å¯ä»¥å¿½ç•¥è¿™ä¸€æ­¥ã€‚</p><p>å¦‚æœå­åº”ç”¨èµ„æºåŠ è½½æ··ä¹±å¯¼è‡´æ¸²æŸ“å¤±è´¥ï¼Œå¯ä»¥å°è¯•è®¾ç½®<code>jsonpFunction</code>æ¥è§£å†³ï¼Œå› ä¸ºç›¸åŒçš„<code>jsonpFunction</code>åç§°ä¼šå¯¼è‡´èµ„æºæ±¡æŸ“ã€‚</p><p>è¿™ç§æƒ…å†µå¸¸è§äºä¸»åº”ç”¨å’Œå­åº”ç”¨éƒ½æ˜¯é€šè¿‡<code>create-react-app</code>ç­‰è„šæ‰‹æ¶åˆ›å»ºçš„reacté¡¹ç›®ï¼Œvueé¡¹ç›®ä¸­å¹¶ä¸å¸¸è§ã€‚</p><p><strong>è§£å†³æ–¹å¼ï¼šä¿®æ”¹å­åº”ç”¨çš„webpacké…ç½®</strong></p>`,40),m=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// webpack.config.js"),a(`
module`),n("span",{class:"token punctuation"},"."),a("exports "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token literal-property property"},"output"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token operator"},"..."),a(`
    `),n("span",{class:"token literal-property property"},"jsonpFunction"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"webpackJsonp_è‡ªå®šä¹‰åç§°"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),a(`
    `),n("span",{class:"token literal-property property"},"globalObject"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token string"},"'window'"),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),v=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// webpack.config.js"),a(`
module`),n("span",{class:"token punctuation"},"."),a("exports "),n("span",{class:"token operator"},"="),a(),n("span",{class:"token punctuation"},"{"),a(`
  `),n("span",{class:"token literal-property property"},"output"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token punctuation"},"{"),a(`
    `),n("span",{class:"token operator"},"..."),a(`
    `),n("span",{class:"token literal-property property"},"chunkLoadingGlobal"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token string"},"'webpackJsonp_è‡ªå®šä¹‰åç§°'"),n("span",{class:"token punctuation"},","),a(`
    `),n("span",{class:"token literal-property property"},"globalObject"),n("span",{class:"token operator"},":"),a(),n("span",{class:"token string"},"'window'"),n("span",{class:"token punctuation"},","),a(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),a(`
`),n("span",{class:"token punctuation"},"}"),a(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),b=n("h4",{id:"_3ã€è®¾ç½®-publicpath",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_3ã€è®¾ç½®-publicpath"},[n("span",null,"3ã€è®¾ç½® publicPath")])],-1),g=n("p",null,[a("å¦‚æœå­åº”ç”¨å‡ºç°é™æ€èµ„æºåœ°å€404(jsã€cssã€å›¾ç‰‡)ï¼Œå»ºè®®è®¾ç½®"),n("code",null,"publicPath"),a("æ¥å°è¯•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚")],-1),h=n("code",null,"publicPath",-1),_={href:"https://webpack.docschina.org/guides/public-path/#on-the-fly",target:"_blank",rel:"noopener noreferrer"},f=o(`<p><strong>æ­¥éª¤1:</strong> åœ¨å­åº”ç”¨srcç›®å½•ä¸‹åˆ›å»ºåç§°ä¸º<code>public-path.ts</code>çš„æ–‡ä»¶ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// __MICRO_APP_ENVIRONMENT__å’Œ__MICRO_APP_PUBLIC_PATH__æ˜¯ç”±micro-appæ³¨å…¥çš„å…¨å±€å˜é‡</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>__MICRO_APP_ENVIRONMENT__<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// eslint-disable-next-line</span>
  __webpack_public_path__ <span class="token operator">=</span> window<span class="token punctuation">.</span>__MICRO_APP_PUBLIC_PATH__
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤2:</strong> åœ¨å­åº”ç”¨å…¥å£æ–‡ä»¶çš„<strong>æœ€é¡¶éƒ¨</strong>å¼•å…¥<code>public-path.ts</code></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// entry</span>
<span class="token keyword">import</span> <span class="token string">&#39;./public-path&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4ã€åˆ‡æ¢åˆ°iframeæ²™ç®±" tabindex="-1"><a class="header-anchor" href="#_4ã€åˆ‡æ¢åˆ°iframeæ²™ç®±"><span>4ã€åˆ‡æ¢åˆ°iframeæ²™ç®±</span></a></h4><p>MicroAppæœ‰ä¸¤ç§æ²™ç®±æ–¹æ¡ˆï¼š<code>withæ²™ç®±</code>å’Œ<code>iframeæ²™ç®±</code>ã€‚</p><p>é»˜è®¤å¼€å¯withæ²™ç®±ï¼Œå¦‚æœwithæ²™ç®±æ— æ³•æ­£å¸¸è¿è¡Œï¼Œå¯ä»¥å°è¯•åˆ‡æ¢åˆ°iframeæ²™ç®±ã€‚</p><h2 id="å¸¸è§é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#å¸¸è§é—®é¢˜"><span>å¸¸è§é—®é¢˜</span></a></h2><h4 id="_1ã€é€šè¿‡micro-appæ•°æ®é€šä¿¡ä¿®æ”¹angularç»„ä»¶æ•°æ®åè§†å›¾ä¸æ›´æ–°" tabindex="-1"><a class="header-anchor" href="#_1ã€é€šè¿‡micro-appæ•°æ®é€šä¿¡ä¿®æ”¹angularç»„ä»¶æ•°æ®åè§†å›¾ä¸æ›´æ–°"><span>1ã€é€šè¿‡micro-appæ•°æ®é€šä¿¡ä¿®æ”¹angularç»„ä»¶æ•°æ®åè§†å›¾ä¸æ›´æ–°</span></a></h4><p><strong>åŸå› ï¼š</strong> å› ä¸ºåœ¨angularåŒºåŸŸå¤–è°ƒç”¨äº†å†…éƒ¨çš„ä»£ç (ä¸»åº”ç”¨å’Œå­åº”ç”¨å±äºä¸åŒçš„angularåŒºåŸŸ)ï¼Œangularæ— æ³•çŸ¥é“çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–ã€‚</p><p><strong>è§£å†³æ–¹å¼ï¼š</strong> é€šè¿‡<code>ngZone.run()</code>è§¦å‘æ›´æ”¹æ£€æµ‹ï¼Œå…·ä½“æ–¹å¼å¦‚ä¸‹ï¼š</p><p><img src="https://img14.360buyimg.com/imagetools/jfs/t1/207551/36/34684/49729/6523aee1F5efef0be/e50e6d782a223dc9.png" alt="angular-question3" title=":size=800"></p><h4 id="_2ã€ä¸»åº”ç”¨æ˜¯reactã€nextjsåº”ç”¨-å¼•å…¥zone-jsåå¯¼è‡´micro-appå…ƒç´ ç”Ÿå‘½å‘¨æœŸå¼‚å¸¸" tabindex="-1"><a class="header-anchor" href="#_2ã€ä¸»åº”ç”¨æ˜¯reactã€nextjsåº”ç”¨-å¼•å…¥zone-jsåå¯¼è‡´micro-appå…ƒç´ ç”Ÿå‘½å‘¨æœŸå¼‚å¸¸"><span>2ã€ä¸»åº”ç”¨æ˜¯reactã€nextjsåº”ç”¨ï¼Œå¼•å…¥zone.jsåå¯¼è‡´micro-appå…ƒç´ ç”Ÿå‘½å‘¨æœŸå¼‚å¸¸</span></a></h4><p>ç›®å‰æ— æ³•è§£å†³ï¼Œè¯·æš‚åœä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚</p>`,14);function y(j,w){const t=e("CodeGroupItem"),c=e("CodeGroup"),l=e("ExternalLinkIcon");return r(),u("div",null,[k,s(c,null,{default:p(()=>[s(t,{title:"webpack4"},{default:p(()=>[m]),_:1}),s(t,{title:"webpack5"},{default:p(()=>[v]),_:1})]),_:1}),b,g,n("p",null,[h,a("æ˜¯webpackæä¾›çš„åŠŸèƒ½ï¼Œå®ƒå¯ä»¥è¡¥å…¨é™æ€èµ„æºçš„åœ°å€ï¼Œè¯¦æƒ…å‚è€ƒwebpackæ–‡æ¡£ "),n("a",_,[a("publicPath"),s(l)])]),f])}const M=i(d,[["render",y],["__file","angular.html.vue"]]);export{M as default};
