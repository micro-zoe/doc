import{_ as r,r as p,o as k,c as d,d as n,e as s,b as a,w as t,a as o}from"./app-Js4EkCke.js";const m={},v=o('<h1 id="虚拟路由系统" tabindex="-1"><a class="header-anchor" href="#虚拟路由系统"><span>虚拟路由系统</span></a></h1><p>MicroApp通过自定义location和history，实现了一套虚拟路由系统，子应用运行在这套虚拟路由系统中，和主应用的路由进行隔离，避免相互影响。</p><p>子应用的路由信息会作为query参数同步到浏览器地址上，如下：</p><p><img src="https://img12.360buyimg.com/imagetools/jfs/t1/204018/30/36539/9736/6523add2F41753832/31f5ad7e48ea6570.png" alt="alt" title=":size=700"></p><p>虚拟路由系统还提供了丰富的功能，帮助用户提升开发效率和使用体验。</p><h2 id="配置项" tabindex="-1"><a class="header-anchor" href="#配置项"><span>配置项</span></a></h2><h4 id="_1、关闭虚拟路由系统" tabindex="-1"><a class="header-anchor" href="#_1、关闭虚拟路由系统"><span>1、关闭虚拟路由系统</span></a></h4>',7),g=n("code",null,"disable-memory-router",-1),b={href:"/zh/browser-router",target:"_blank",rel:"noopener noreferrer"},h=o(`<p><strong>使用方式：</strong></p><p>1、关闭某个子应用的虚拟路由</p><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>micro-app</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>xx<span class="token punctuation">&#39;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>xx<span class="token punctuation">&#39;</span></span> <span class="token attr-name">disable-memory-router</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>micro-app</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2、关闭所有子应用的虚拟路由</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> microApp <span class="token keyword">from</span> <span class="token string">&#39;@micro-zoe/micro-app&#39;</span>

<span class="token comment">// 在start中增加配置</span>
microApp<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string-property property">&#39;disable-memory-router&#39;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 关闭虚拟路由</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2、保留路由状态" tabindex="-1"><a class="header-anchor" href="#_2、保留路由状态"><span>2、保留路由状态</span></a></h4><p>默认情况下，子应用卸载后重新渲染，将和首次加载一样渲染子应用的首页。</p><p>设置<code>keep-router-state</code>可以保留子应用路由状态，在卸载后重新渲染时将恢复卸载前的页面（页面中的状态不保留）。</p><p><strong>使用方式：</strong></p><p>1、保留某个子应用的路由状态</p><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>micro-app</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>xx<span class="token punctuation">&#39;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>xx<span class="token punctuation">&#39;</span></span> <span class="token attr-name">keep-router-state</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>micro-app</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2、保留所有子应用的路由状态</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> microApp <span class="token keyword">from</span> <span class="token string">&#39;@micro-zoe/micro-app&#39;</span>

<span class="token comment">// 在start中增加配置</span>
microApp<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string-property property">&#39;keep-router-state&#39;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 保留路由状态</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：</p><ol><li>如果关闭了虚拟路由系统，<code>keep-router-state</code>也将失效。</li><li>当设置了<code>default-page</code>时<code>keep-router-state</code>将失效，因为它的优先级小于<code>default-page</code></li></ol><h2 id="导航" tabindex="-1"><a class="header-anchor" href="#导航"><span>导航</span></a></h2><p>通过虚拟路由系统，我们可以方便的进行跨应用的跳转，如：</p><ol><li>主应用控制子应用跳转</li><li>子应用控制主应用跳转</li><li>子应用控制其它子应用跳转</li></ol>`,18),y={href:"/zh/jump#%E6%96%B9%E5%BC%8F%E4%BA%8C%E3%80%81%E9%80%9A%E8%BF%87%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E6%8E%A7%E5%88%B6%E8%B7%B3%E8%BD%AC",target:"_blank",rel:"noopener noreferrer"},f=n("h3",{id:"router-push",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#router-push"},[n("span",null,"router.push")])],-1),_=n("p",null,[n("strong",null,"介绍："),s(" 控制子应用跳转，并向路由堆栈添加一条新的记录")],-1),j=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"name"),s(` 必填，子应用的name
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"path"),s(` 必填，子应用除域名外的全量地址(也可以带上域名)
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("boolean"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"replace"),s(` 可选，是否使用replace模式，不新增堆栈记录，默认为false
 */`)]),s(`
router`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'子应用名称'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'页面地址'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"replace"),n("span",{class:"token operator"},":"),s(" 是否使用replace模式 "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),w=n("p",null,[n("strong",null,"示例：")],-1),A=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" microApp "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@micro-zoe/micro-app'"),s(`

`),n("span",{class:"token comment"},"// 不带域名的地址，控制子应用my-app跳转/page1"),s(`
microApp`),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/page1'"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 带域名的地址，控制子应用my-app跳转/page1"),s(`
microApp`),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'http://localhost:3000/page1'"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 带查询参数，控制子应用my-app跳转/page1?id=9527"),s(`
microApp`),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/page1?id=9527'"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 带hash，控制子应用my-app跳转/page1#hash"),s(`
microApp`),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/page1#hash'"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 使用replace模式，等同于 router.replace({name: 'my-app', path: '/page1'})"),s(`
microApp`),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/page1'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"replace"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),x=n("h3",{id:"router-replace",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#router-replace"},[n("span",null,"router.replace")])],-1),E=n("p",null,[n("strong",null,"介绍："),s(" 控制子应用跳转，但不会向路由堆栈添加新的记录，而是替换最新的堆栈记录。")],-1),P=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"name"),s(` 必填，子应用的name
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"path"),s(` 必填，子应用除域名外的全量地址(也可以带上域名)
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("boolean"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"replace"),s(` 可选，是否使用replace模式，默认为true
 */`)]),s(`
router`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"replace"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'子应用名称'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'页面地址'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"replace"),n("span",{class:"token operator"},":"),s(" 是否使用replace模式 "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),q=n("p",null,[n("strong",null,"示例：")],-1),z=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" microApp "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@micro-zoe/micro-app'"),s(`

`),n("span",{class:"token comment"},"// 不带域名的地址"),s(`
microApp`),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"replace"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/page1'"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 带域名的地址"),s(`
microApp`),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"replace"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'http://localhost:3000/page1'"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 带查询参数"),s(`
microApp`),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"replace"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/page1?id=9527'"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 带hash"),s(`
microApp`),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"replace"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/page1#hash'"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 关闭replace模式，等同于 router.push({name: 'my-app', path: '/page1'})"),s(`
microApp`),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"replace"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/page1'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"replace"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),R=n("h3",{id:"router-go",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#router-go"},[n("span",null,"router.go")])],-1),B=n("p",null,[n("strong",null,"介绍："),s(" 它的功能和window.history.go(n)一致，表示在历史堆栈中前进或后退多少步。")],-1),C=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("number"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"n"),s(` 前进或后退多少步
 */`)]),s(`
router`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"go"),n("span",{class:"token punctuation"},"("),s("n"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),F=n("p",null,[n("strong",null,"示例：")],-1),N=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" microApp "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@micro-zoe/micro-app'"),s(`

`),n("span",{class:"token comment"},"// 返回一条记录"),s(`
microApp`),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"go"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"-"),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 前进 3 条记录"),s(`
microApp`),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"go"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),D=n("h3",{id:"router-back",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#router-back"},[n("span",null,"router.back")])],-1),I=n("p",null,[n("strong",null,"介绍："),s(" 它的功能和window.history.back()一致，表示在历史堆栈中后退一步。")],-1),T=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"back"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),L=n("p",null,[n("strong",null,"示例：")],-1),U=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" microApp "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@micro-zoe/micro-app'"),s(`

`),n("span",{class:"token comment"},"// 返回一条记录"),s(`
microApp`),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"back"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),G=n("h3",{id:"router-forward",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#router-forward"},[n("span",null,"router.forward")])],-1),V=n("p",null,[n("strong",null,"介绍："),s(" 它的功能和window.history.forward()一致，表示在历史堆栈中前进一步。")],-1),H=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"forward"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),M=n("p",null,[n("strong",null,"示例：")],-1),S=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" microApp "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@micro-zoe/micro-app'"),s(`

`),n("span",{class:"token comment"},"// 前进一条记录"),s(`
microApp`),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"forward"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),J=n("p",null,[s("子应用的路由API和主应用保持一致，不同点是"),n("code",null,"microApp"),s("挂载在window上。")],-1),K=n("h3",{id:"子应用控制主应用跳转",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#子应用控制主应用跳转"},[n("span",null,"子应用控制主应用跳转")])],-1),O=n("p",null,"默认情况下，子应用无法直接控制主应用的跳转，为此我们提供了一个API，将主应用的路由对象传递给子应用。",-1),Q=n("p",null,[n("strong",null,"主应用")],-1),W=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" microApp "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@micro-zoe/micro-app'"),s(`

`),n("span",{class:"token comment"},"// 注册主应用路由"),s(`
microApp`),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setBaseAppRouter"),n("span",{class:"token punctuation"},"("),s("主应用的路由对象"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),X=n("p",null,[n("strong",null,"子应用")],-1),Y=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// 获取主应用路由"),s(`
`),n("span",{class:"token keyword"},"const"),s(" baseRouter "),n("span",{class:"token operator"},"="),s(" window"),n("span",{class:"token punctuation"},"."),s("microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getBaseAppRouter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(` 

`),n("span",{class:"token comment"},"// 控制主应用跳转"),s(`
baseRouter`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"主应用路由的方法"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"..."),n("span",{class:"token punctuation"},")"),s(` 
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Z=n("h3",{id:"控制其他子应用跳转",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#控制其他子应用跳转"},[n("span",null,"控制其他子应用跳转")])],-1),$=n("h3",{id:"router-push-1",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#router-push-1"},[n("span",null,"router.push")])],-1),nn=n("p",null,[n("strong",null,"介绍："),s(" 控制其它子应用跳转，并向路由堆栈添加一条新的记录")],-1),sn=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"name"),s(` 必填，子应用的name
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"path"),s(` 必填，子应用除域名外的全量地址(也可以带上域名)
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("boolean"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"replace"),s(` 可选，是否使用replace模式，不新增堆栈记录，默认为false
 */`)]),s(`
router`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'子应用名称'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'页面地址'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"replace"),n("span",{class:"token operator"},":"),s(" 是否使用replace模式 "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),an=n("p",null,[n("strong",null,"示例：")],-1),tn=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// 不带域名的地址，控制子应用my-app跳转/page1"),s(`
window`),n("span",{class:"token punctuation"},"."),s("microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/page1'"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 带域名的地址，控制子应用my-app跳转/page1"),s(`
window`),n("span",{class:"token punctuation"},"."),s("microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'http://localhost:3000/page1'"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 带查询参数，控制子应用my-app跳转/page1?id=9527"),s(`
window`),n("span",{class:"token punctuation"},"."),s("microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/page1?id=9527'"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 带hash，控制子应用my-app跳转/page1#hash"),s(`
window`),n("span",{class:"token punctuation"},"."),s("microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/page1#hash'"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 使用replace模式，等同于 router.replace({name: 'my-app', path: '/page1'})"),s(`
window`),n("span",{class:"token punctuation"},"."),s("microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/page1'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"replace"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),en=n("h3",{id:"router-replace-1",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#router-replace-1"},[n("span",null,"router.replace")])],-1),pn=n("p",null,[n("strong",null,"介绍："),s(" 控制其它子应用跳转，但不会向路由堆栈添加新的记录，而是替换最新的堆栈记录。")],-1),on=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"name"),s(` 必填，子应用的name
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("string"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"path"),s(` 必填，子应用除域名外的全量地址(也可以带上域名)
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("boolean"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"replace"),s(` 可选，是否使用replace模式，默认为true
 */`)]),s(`
router`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"replace"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'子应用名称'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'页面地址'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"replace"),n("span",{class:"token operator"},":"),s(" 是否使用replace模式 "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),cn=n("p",null,[n("strong",null,"示例：")],-1),ln=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// 不带域名的地址"),s(`
window`),n("span",{class:"token punctuation"},"."),s("microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"replace"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/page1'"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 带域名的地址"),s(`
window`),n("span",{class:"token punctuation"},"."),s("microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"replace"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'http://localhost:3000/page1'"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 带查询参数"),s(`
window`),n("span",{class:"token punctuation"},"."),s("microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"replace"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/page1?id=9527'"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 带hash"),s(`
window`),n("span",{class:"token punctuation"},"."),s("microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"replace"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/page1#hash'"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 关闭replace模式，等同于 router.push({name: 'my-app', path: '/page1'})"),s(`
window`),n("span",{class:"token punctuation"},"."),s("microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"replace"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token literal-property property"},"name"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'/page1'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"replace"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"false"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),un=n("h3",{id:"router-go-1",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#router-go-1"},[n("span",null,"router.go")])],-1),rn=n("p",null,[n("strong",null,"介绍："),s(" 它的功能和window.history.go(n)一致，表示在历史堆栈中前进或后退多少步。")],-1),kn=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token doc-comment comment"},[s(`/**
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token class-name"},[n("span",{class:"token punctuation"},"{"),s("number"),n("span",{class:"token punctuation"},"}")]),s(),n("span",{class:"token parameter"},"n"),s(` 前进或后退多少步
 */`)]),s(`
router`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"go"),n("span",{class:"token punctuation"},"("),s("n"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),dn=n("p",null,[n("strong",null,"示例：")],-1),mn=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// 返回一条记录"),s(`
window`),n("span",{class:"token punctuation"},"."),s("microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"go"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"-"),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 前进 3 条记录"),s(`
window`),n("span",{class:"token punctuation"},"."),s("microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"go"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),vn=n("h3",{id:"router-back-1",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#router-back-1"},[n("span",null,"router.back")])],-1),gn=n("p",null,[n("strong",null,"介绍："),s(" 它的功能和window.history.back()一致，表示在历史堆栈中后退一步。")],-1),bn=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"back"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),hn=n("p",null,[n("strong",null,"示例：")],-1),yn=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// 返回一条记录"),s(`
window`),n("span",{class:"token punctuation"},"."),s("microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"back"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),fn=n("h3",{id:"router-forward-1",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#router-forward-1"},[n("span",null,"router.forward")])],-1),_n=n("p",null,[n("strong",null,"介绍："),s(" 它的功能和window.history.forward()一致，表示在历史堆栈中前进一步。")],-1),jn=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"forward"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),wn=n("p",null,[n("strong",null,"示例：")],-1),An=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// 前进一条记录"),s(`
window`),n("span",{class:"token punctuation"},"."),s("microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"forward"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),xn=o(`<h2 id="设置默认页面" tabindex="-1"><a class="header-anchor" href="#设置默认页面"><span>设置默认页面</span></a></h2><p>子应用加载后会默认渲染首页，但我们常常希望子应用加载后渲染指定的页面，此时可以设置<code>defaultPage</code>指定子应用渲染的页面。</p><p><strong>方式一：设置default-page属性</strong></p><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>micro-app</span> <span class="token attr-name">default-page</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>页面地址<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>micro-app</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>示例：</strong></p><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token comment">&lt;!-- 不带域名的地址 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>micro-app</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>my-app<span class="token punctuation">&#39;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>http://localhost:3000/<span class="token punctuation">&#39;</span></span> <span class="token attr-name">default-page</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>/page1<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>micro-app</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 带域名的地址 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>micro-app</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>my-app<span class="token punctuation">&#39;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>http://localhost:3000/<span class="token punctuation">&#39;</span></span> <span class="token attr-name">default-page</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>http://localhost:3000/page1<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>micro-app</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 带查询参数 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>micro-app</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>my-app<span class="token punctuation">&#39;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>http://localhost:3000/<span class="token punctuation">&#39;</span></span> <span class="token attr-name">default-page</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>/page1?id=9527<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>micro-app</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 带hash --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>micro-app</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>my-app<span class="token punctuation">&#39;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>http://localhost:3000/<span class="token punctuation">&#39;</span></span> <span class="token attr-name">default-page</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>/page1#hash<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>micro-app</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>方式二：通过router API设置</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 设置子应用默认页面
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>string<span class="token punctuation">}</span></span> <span class="token parameter">name</span> 必填，子应用的name
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>string<span class="token punctuation">}</span></span> <span class="token parameter">path</span> 必填，页面地址
 */</span>
router<span class="token punctuation">.</span><span class="token function">setDefaultPage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;子应用名称&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;页面地址&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token doc-comment comment">/**
 * 删除子应用默认页面
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>string<span class="token punctuation">}</span></span> <span class="token parameter">name</span> 必填，子应用的name
 */</span>
router<span class="token punctuation">.</span><span class="token function">removeDefaultPage</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token string">&#39;子应用名称&#39;</span><span class="token punctuation">)</span>

<span class="token doc-comment comment">/**
 * 获取子应用默认页面
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>string<span class="token punctuation">}</span></span> <span class="token parameter">name</span> 必填，子应用的name
 */</span>
router<span class="token punctuation">.</span><span class="token function">getDefaultPage</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token string">&#39;子应用名称&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>示例：</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> microApp <span class="token keyword">from</span> <span class="token string">&#39;@micro-zoe/micro-app&#39;</span>

<span class="token comment">// 不带域名的地址</span>
microApp<span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">setDefaultPage</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;my-app&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/page1&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 带域名的地址</span>
microApp<span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">setDefaultPage</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;my-app&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;http://localhost:3000/page1&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 带查询参数</span>
microApp<span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">setDefaultPage</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;my-app&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/page1?id=9527&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 带hash</span>
microApp<span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">setDefaultPage</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;my-app&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/page1#hash&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 删除子应用my-app的默认页面</span>
router<span class="token punctuation">.</span><span class="token function">removeDefaultPage</span><span class="token punctuation">(</span><span class="token string">&#39;my-app&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 获取子应用my-app的默认页面</span>
<span class="token keyword">const</span> defaultPage <span class="token operator">=</span> router<span class="token punctuation">.</span><span class="token function">getDefaultPage</span><span class="token punctuation">(</span><span class="token string">&#39;my-app&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="导航守卫" tabindex="-1"><a class="header-anchor" href="#导航守卫"><span>导航守卫</span></a></h2><p>导航守卫用于监听子应用的路由变化，类似于vue-router的全局守卫，不同点是MicroApp的导航守卫无法取消跳转。</p><h4 id="全局前置守卫" tabindex="-1"><a class="header-anchor" href="#全局前置守卫"><span>全局前置守卫</span></a></h4><p><strong>介绍：</strong> 监听所有或某个子应用的路由变化，在子应用页面渲染前执行。</p><p><strong>使用范围：</strong> 主应用</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>object<span class="token punctuation">}</span></span> <span class="token parameter">to</span> 即将要进入的路由
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>object<span class="token punctuation">}</span></span> <span class="token parameter">from</span> 正要离开的路由
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>string<span class="token punctuation">}</span></span> <span class="token parameter">name</span> 子应用的name
 * <span class="token keyword">@return</span> cancel function 解绑路由监听函数
 */</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span> <span class="token function-variable function">name</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>示例：</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> microApp <span class="token keyword">from</span> <span class="token string">&#39;@micro-zoe/micro-app&#39;</span>

<span class="token comment">// 监听所有子应用的路由变化</span>
microApp<span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> appName</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;全局前置守卫 beforeEach: &#39;</span><span class="token punctuation">,</span> to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> appName<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 监听某个子应用的路由变化</span>
microApp<span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">子应用1name</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;指定子应用的前置守卫 beforeEach &#39;</span><span class="token punctuation">,</span> to<span class="token punctuation">,</span> from<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">子应用2name</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;指定子应用的前置守卫 beforeEach &#39;</span><span class="token punctuation">,</span> to<span class="token punctuation">,</span> from<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// beforeEach会返回一个解绑函数</span>
<span class="token keyword">const</span> cancelCallback <span class="token operator">=</span> microApp<span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> appName</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;全局前置守卫 beforeEach: &#39;</span><span class="token punctuation">,</span> to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> appName<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 解绑路由监听</span>
<span class="token function">cancelCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="全局后置守卫" tabindex="-1"><a class="header-anchor" href="#全局后置守卫"><span>全局后置守卫</span></a></h4><p><strong>介绍：</strong> 监听所有或某个子应用的路由变化，在子应用页面渲染后执行。</p><p><strong>使用范围：</strong> 主应用</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>object<span class="token punctuation">}</span></span> <span class="token parameter">to</span> 已经进入的路由
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>object<span class="token punctuation">}</span></span> <span class="token parameter">from</span> 已经离开的路由
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>string<span class="token punctuation">}</span></span> <span class="token parameter">name</span> 子应用的name
 * <span class="token keyword">@return</span> cancel function 解绑路由监听函数
 */</span>
router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span> <span class="token function-variable function">name</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>示例：</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> microApp <span class="token keyword">from</span> <span class="token string">&#39;@micro-zoe/micro-app&#39;</span>

<span class="token comment">// 监听所有子应用的路由变化</span>
microApp<span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> appName</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;全局后置守卫 afterEach: &#39;</span><span class="token punctuation">,</span> to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> appName<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 监听某个子应用的路由变化</span>
microApp<span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">子应用1name</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;指定子应用的后置守卫 afterEach &#39;</span><span class="token punctuation">,</span> to<span class="token punctuation">,</span> from<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">子应用2name</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;指定子应用的后置守卫 beforeEach &#39;</span><span class="token punctuation">,</span> to<span class="token punctuation">,</span> from<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// afterEach会返回一个解绑函数</span>
<span class="token keyword">const</span> cancelCallback <span class="token operator">=</span> microApp<span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> appName</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;全局后置守卫 afterEach: &#39;</span><span class="token punctuation">,</span> to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> appName<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 解绑路由监听</span>
<span class="token function">cancelCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="获取路由信息" tabindex="-1"><a class="header-anchor" href="#获取路由信息"><span>获取路由信息</span></a></h2><p><strong>介绍：</strong> 获取子应用的路由信息，返回值与子应用的location相同</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>string<span class="token punctuation">}</span></span> <span class="token parameter">name</span> 必填，子应用的name
 */</span>
router<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>示例：</strong></p>`,28),En=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" microApp "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@micro-zoe/micro-app'"),s(`

`),n("span",{class:"token comment"},"// 获取子应用my-app的路由信息，返回值与子应用的location相同"),s(`
`),n("span",{class:"token keyword"},"const"),s(" routeInfo "),n("span",{class:"token operator"},"="),s(" microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),s("current"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Pn=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// 获取子应用my-app的路由信息，返回值与子应用的location相同"),s(`
`),n("span",{class:"token keyword"},"const"),s(" routeInfo "),n("span",{class:"token operator"},"="),s(" window"),n("span",{class:"token punctuation"},"."),s("microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),s("current"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'my-app'"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),qn=o(`<h2 id="编解码" tabindex="-1"><a class="header-anchor" href="#编解码"><span>编解码</span></a></h2><p><strong>介绍：</strong> 子应用同步到浏览器的路由信息是经过特殊编码的(encodeURIComponent + 特殊字符转译)，如果用户想要编码或解码子应用的路由信息，可以使用编解码的API。</p><p><img src="https://img12.360buyimg.com/imagetools/jfs/t1/204018/30/36539/9736/6523add2F41753832/31f5ad7e48ea6570.png" alt="alt" title=":size=700"></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 编码
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>string<span class="token punctuation">}</span></span> <span class="token parameter">path</span> 必填，页面地址
 */</span>
router<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>path<span class="token operator">:</span> string<span class="token punctuation">)</span>

<span class="token doc-comment comment">/**
 * 解码
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>string<span class="token punctuation">}</span></span> <span class="token parameter">path</span> 必填，页面地址
 */</span>
router<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>path<span class="token operator">:</span> string<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>示例：</strong></p>`,5),zn=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(" microApp "),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@micro-zoe/micro-app'"),s(`

`),n("span",{class:"token comment"},"// 返回 %2Fpage1%2F"),s(`
`),n("span",{class:"token keyword"},"const"),s(" encodeResult "),n("span",{class:"token operator"},"="),s(" microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"encode"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/page1/'"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 返回 /page1/"),s(`
`),n("span",{class:"token keyword"},"const"),s(" encodeResult "),n("span",{class:"token operator"},"="),s(" microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"decode"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'%2Fpage1%2F'"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Rn=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token comment"},"// 返回 %2Fpage1%2F"),s(`
`),n("span",{class:"token keyword"},"const"),s(" encodeResult "),n("span",{class:"token operator"},"="),s(" window"),n("span",{class:"token punctuation"},"."),s("microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"encode"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/page1/'"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token comment"},"// 返回 /page1/"),s(`
`),n("span",{class:"token keyword"},"const"),s(" encodeResult "),n("span",{class:"token operator"},"="),s(" window"),n("span",{class:"token punctuation"},"."),s("microApp"),n("span",{class:"token punctuation"},"."),s("router"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"decode"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'%2Fpage1%2F'"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Bn=o(`<h2 id="同步路由信息" tabindex="-1"><a class="header-anchor" href="#同步路由信息"><span>同步路由信息</span></a></h2><p>在一些特殊情况下，主应用的跳转会导致浏览器地址上子应用信息丢失，此时可以主动调用方法，将子应用的路由信息同步到浏览器地址上。</p><p><strong>介绍：</strong> 主动将子应用的路由信息同步到浏览器地址上</p><p><strong>使用范围：</strong> 主应用</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 将指定子应用的路由信息同步到浏览器地址上
 * 如果应用未渲染或已经卸载，则方法无效
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>string<span class="token punctuation">}</span></span> <span class="token parameter">name</span> 子应用的名称
 */</span>
router<span class="token punctuation">.</span><span class="token function">attachToURL</span><span class="token punctuation">(</span>name<span class="token operator">:</span> string<span class="token punctuation">)</span>

<span class="token doc-comment comment">/**
 * 将所有正在运行的子应用路由信息同步到浏览器地址上
 * 它接受一个对象作为参数，详情如下：
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>boolean<span class="token punctuation">}</span></span> <span class="token parameter">includeHiddenApp</span> 是否包含已经隐藏的keep-alive应用，默认为false
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>boolean<span class="token punctuation">}</span></span> <span class="token parameter">includePreRender</span> 是否包含预渲染应用，默认为false
 */</span>
router<span class="token punctuation">.</span><span class="token function">attachAllToURL</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  includeHiddenApp<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
  includePreRender<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>示例：</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> microApp <span class="token keyword">from</span> <span class="token string">&#39;@micro-zoe/micro-app&#39;</span>

<span class="token comment">// 将my-app的路由信息同步到浏览器地址上</span>
microApp<span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">attachToURL</span><span class="token punctuation">(</span><span class="token string">&#39;my-app&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 将所有正在运行的子应用路由信息同步到浏览器地址上，不包含处于隐藏状态的keep-alive应用和预渲染应用</span>
microApp<span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">attachAllToURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 将所有正在运行的子应用路由信息同步到浏览器地址上，包含处于隐藏状态的keep-alive应用</span>
microApp<span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">attachAllToURL</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">includeHiddenApp</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 将所有正在运行的子应用路由信息同步到浏览器地址上，包含预渲染应用</span>
microApp<span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">attachAllToURL</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">includePreRender</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7);function Cn(Fn,Nn){const c=p("ExternalLinkIcon"),l=p("TabPanel"),u=p("Tabs"),e=p("CodeGroupItem"),i=p("CodeGroup");return k(),d("div",null,[v,n("p",null,[s("虚拟路由系统是默认开启的，设置"),g,s("可以进行关闭，此时子应用将基于浏览器路由进行渲染，参考"),n("a",b,[s("browser-router"),a(c)])]),h,n("p",null,[s("由于nextjs的路由系统非常特殊，当子应用是nextjs时无法直接控制跳转，参考"),n("a",y,[s("通过数据通信控制跳转"),a(c)])]),a(u,null,{default:t(()=>[a(l,{title:"主应用"},{default:t(()=>[f,_,j,w,A,x,E,P,q,z,R,B,C,F,N,D,I,T,L,U,G,V,H,M,S]),_:1}),a(l,{title:"子应用"},{default:t(()=>[J,K,O,Q,W,X,Y,Z,$,nn,sn,an,tn,en,pn,on,cn,ln,un,rn,kn,dn,mn,vn,gn,bn,hn,yn,fn,_n,jn,wn,An]),_:1})]),_:1}),xn,a(i,null,{default:t(()=>[a(e,{title:"主应用"},{default:t(()=>[En]),_:1}),a(e,{title:"子应用"},{default:t(()=>[Pn]),_:1}),a(e,{title:""})]),_:1}),qn,a(i,null,{default:t(()=>[a(e,{title:"主应用"},{default:t(()=>[zn]),_:1}),a(e,{title:"子应用"},{default:t(()=>[Rn]),_:1})]),_:1}),Bn])}const In=r(m,[["render",Cn],["__file","router.html.vue"]]);export{In as default};
