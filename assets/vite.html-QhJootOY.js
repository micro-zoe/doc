import{_ as t,r as p,o as e,c as o,d as n,e as s,b as c,a as i}from"./app-CYuVcYeJ.js";const l={},u=n("h1",{id:"vite",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#vite"},[n("span",null,"Vite")])],-1),r={class:"custom-container danger"},d=n("p",{class:"custom-container-title"},"è­¦å‘Š",-1),k=n("p",null,"åœ¨æ­£å¼ç‰ˆä¸­æ¥å…¥viteå­åº”ç”¨éœ€è¦å…³é—­æ²™ç®±ï¼Œè¿™ä¼šå¯¼è‡´å¾ˆå¤šé—®é¢˜ï¼Œæš‚æ—¶ä¸å»ºè®®æ¥å…¥ã€‚",-1),v={href:"https://micro-zoe.com/docs/1.x/#/zh-cn/start",target:"_blank",rel:"noopener noreferrer"},m=i(`<h2 id="ä½œä¸ºåŸºåº§åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#ä½œä¸ºåŸºåº§åº”ç”¨"><span>ä½œä¸ºåŸºåº§åº”ç”¨</span></a></h2><p>viteä½œä¸ºåŸºåº§åº”ç”¨æ—¶æ²¡æœ‰ç‰¹æ®Šä¹‹å¤„ï¼Œå…·ä½“æ–¹å¼å‚è€ƒå„æ¡†æ¶æ¥å…¥æ–‡æ¡£ã€‚</p><h2 id="ä½œä¸ºå­åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#ä½œä¸ºå­åº”ç”¨"><span>ä½œä¸ºå­åº”ç”¨</span></a></h2><p>å½“å­åº”ç”¨æ˜¯viteåº”ç”¨æ—¶éœ€è¦åšç‰¹åˆ«çš„é€‚é…ï¼Œé€‚é…viteçš„ä»£ä»·æ˜¯å·¨å¤§çš„ï¼Œæˆ‘ä»¬å¿…é¡»å…³é—­æ²™ç®±åŠŸèƒ½ï¼Œå› ä¸ºæ²™ç®±åœ¨<code>module script</code>ä¸‹ä¸æ”¯æŒï¼Œè¿™å¯¼è‡´å¤§éƒ¨åˆ†åŠŸèƒ½å¤±æ•ˆï¼ŒåŒ…æ‹¬ï¼šç¯å¢ƒå˜é‡ã€æ ·å¼éš”ç¦»ã€å…ƒç´ éš”ç¦»ã€èµ„æºè·¯å¾„è¡¥å…¨ã€baseroute ç­‰ã€‚</p><p>åœ¨åµŒå…¥viteå­åº”ç”¨æ—¶ï¼Œ<code>micro-app</code>çš„åŠŸèƒ½åªè´Ÿè´£æ¸²æŸ“ï¼Œå…¶å®ƒçš„è¡Œä¸ºç”±åº”ç”¨è‡ªè¡Œå†³å®šï¼Œè¿™åŒ…æ‹¬å¦‚ä½•é˜²æ­¢æ ·å¼ã€JSå˜é‡ã€å…ƒç´ çš„å†²çªã€‚</p><p>åœ¨moduleæ¨¡å¼ä¸‹ï¼Œå¼•å…¥çš„èµ„æºå¤§å¤šä¸ºç›¸å¯¹åœ°å€ï¼Œå…¼å®¹ä¸»è¦åšçš„äº‹æƒ…å°±æ˜¯å°†åœ°å€è¡¥å…¨ã€‚</p><h3 id="ğŸ‘‡-å­åº”ç”¨çš„ä¿®æ”¹" tabindex="-1"><a class="header-anchor" href="#ğŸ‘‡-å­åº”ç”¨çš„ä¿®æ”¹"><span>ğŸ‘‡ å­åº”ç”¨çš„ä¿®æ”¹</span></a></h3><p><strong>1ã€ä¿®æ”¹vite.config.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> join <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;path&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> writeFileSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;fs&#39;</span>

<span class="token comment">// vite.config.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">base</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;production&#39;</span> <span class="token operator">?</span> <span class="token string">&#39;http://my-site.com&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/basename/</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// è‡ªå®šä¹‰æ’ä»¶</span>
    <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> basePath <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;vite:micro-app&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">apply</span><span class="token operator">:</span> <span class="token string">&#39;build&#39;</span><span class="token punctuation">,</span>
        <span class="token function">configResolved</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          basePath <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>config<span class="token punctuation">.</span>base<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>config<span class="token punctuation">.</span>build<span class="token punctuation">.</span>assetsDir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">\`</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">writeBundle</span> <span class="token punctuation">(</span><span class="token parameter">options<span class="token punctuation">,</span> bundle</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> chunkName <span class="token keyword">in</span> bundle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>bundle<span class="token punctuation">,</span> chunkName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">const</span> chunk <span class="token operator">=</span> bundle<span class="token punctuation">[</span>chunkName<span class="token punctuation">]</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>chunk<span class="token punctuation">.</span>fileName <span class="token operator">&amp;&amp;</span> chunk<span class="token punctuation">.</span>fileName<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&#39;.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                chunk<span class="token punctuation">.</span>code <span class="token operator">=</span> chunk<span class="token punctuation">.</span>code<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(from|import\\()(\\s*[&#39;&quot;])(\\.\\.?\\/)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">all<span class="token punctuation">,</span> $1<span class="token punctuation">,</span> $2<span class="token punctuation">,</span> $3</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                  <span class="token keyword">return</span> all<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>$3<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>$3<span class="token punctuation">,</span> basePath<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token keyword">const</span> fullPath <span class="token operator">=</span> <span class="token function">join</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>dir<span class="token punctuation">,</span> chunk<span class="token punctuation">.</span>fileName<span class="token punctuation">)</span>
                <span class="token function">writeFileSync</span><span class="token punctuation">(</span>fullPath<span class="token punctuation">,</span> chunk<span class="token punctuation">.</span>code<span class="token punctuation">)</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2ã€ä¿®æ”¹å®¹å™¨å…ƒç´ id</strong></p><p>å› ä¸ºviteå­åº”ç”¨æ²¡æœ‰å…ƒç´ éš”ç¦»çš„ä¿æŠ¤ï¼Œå»ºè®®ä¿®æ”¹å®¹å™¨å…ƒç´ çš„idå€¼ï¼Œä»¥ç¡®ä¿ä¸å…¶å®ƒå…ƒç´ ä¸å†²çªã€‚</p><p><em>1ã€ä¿®æ”¹index.htmlä¸­å®¹å™¨å…ƒç´ çš„idå€¼</em></p><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token comment">&lt;!-- index.html --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-vite-app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>2ã€ä½¿ç”¨æ–°çš„idæ¸²æŸ“</em></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// main.js</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&#39;#my-vite-app&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“å¤šä¸ªviteå­åº”ç”¨åŒæ—¶æ¸²æŸ“æ—¶ï¼Œå¿…é¡»ä¿®æ”¹å®¹å™¨å…ƒç´ çš„idå€¼ï¼Œç¡®ä¿æ¯ä¸ªå­åº”ç”¨å®¹å™¨å…ƒç´ idçš„å”¯ä¸€æ€§ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸æ¸²æŸ“ã€‚</p><p><strong>3ã€è·¯ç”±</strong></p><p>æ¨èåŸºåº§ä½¿ç”¨historyè·¯ç”±ï¼Œviteå­åº”ç”¨ä½¿ç”¨hashè·¯ç”±ï¼Œé¿å…ä¸€äº›å¯èƒ½å‡ºç°çš„é—®é¢˜ã€‚</p><p>å­åº”ç”¨å¦‚æœæ˜¯vue3ï¼Œåœ¨åˆå§‹åŒ–æ—¶è·¯ç”±æ—¶ï¼ŒcreateWebHashHistoryä¸è¦ä¼ å…¥å‚æ•°ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHashHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  routes<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>4ã€é™æ€èµ„æº</strong></p><p>å›¾ç‰‡ç­‰é™æ€èµ„æºéœ€è¦ä½¿ç”¨ç»å¯¹åœ°å€ï¼Œå¯ä»¥ä½¿ç”¨ <code>new URL(&#39;../assets/logo.png&#39;, import.meta.url).href</code> ç­‰æ–¹å¼è·å–èµ„æºçš„å…¨é“¾æ¥åœ°å€ã€‚</p><h3 id="ğŸ‘‡-åŸºåº§åº”ç”¨çš„ä¿®æ”¹" tabindex="-1"><a class="header-anchor" href="#ğŸ‘‡-åŸºåº§åº”ç”¨çš„ä¿®æ”¹"><span>ğŸ‘‡ åŸºåº§åº”ç”¨çš„ä¿®æ”¹</span></a></h3><p>æ³¨æ„è¿™é‡Œçš„åŸºåº§åº”ç”¨æ˜¯æŒ‡åµŒå…¥äº†viteå­åº”ç”¨çš„åŸºåº§ï¼Œå®ƒå¯ä»¥æ˜¯ä»»ä½•æ¡†æ¶ï¼Œå’Œä¸Šé¢<code>ä½œä¸ºåŸºåº§åº”ç”¨</code>ä¸€èŠ‚æ— å…³ã€‚</p><p><strong>1ã€å…³é—­æ²™ç®±å¹¶ä½¿ç”¨å†…è”scriptæ¨¡å¼</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>micro<span class="token operator">-</span>app
  name<span class="token operator">=</span><span class="token string">&#39;child-name&#39;</span>
  url<span class="token operator">=</span><span class="token string">&#39;http://localhost:3001/basename/&#39;</span>
  inline <span class="token comment">// ä½¿ç”¨å†…è”scriptæ¨¡å¼</span>
  disableSandbox <span class="token comment">// å…³é—­æ²™ç®±</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2ã€å¤„ç†å­åº”ç”¨é™æ€èµ„æº</strong></p><p>å†™ä¸€ä¸ªç®€æ˜“çš„æ’ä»¶ï¼Œå¯¹å¼€å‘ç¯å¢ƒçš„å­åº”ç”¨è¿›è¡Œå¤„ç†ï¼Œè¡¥å…¨é™æ€èµ„æºè·¯å¾„ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> microApp <span class="token keyword">from</span> <span class="token string">&#39;@micro-zoe/micro-app&#39;</span>

microApp<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// appNameå³åº”ç”¨çš„nameå€¼</span>
      <span class="token literal-property property">appName</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token function">loader</span><span class="token punctuation">(</span><span class="token parameter">code</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// è¿™é‡Œ basename éœ€è¦å’Œå­åº”ç”¨vite.config.jsä¸­baseçš„é…ç½®ä¿æŒä¸€è‡´</span>
            code <span class="token operator">=</span> code<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(from|import)(\\s*[&#39;&quot;])(\\/basename\\/)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token parameter">all</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> all<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;/basename/&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å­åº”ç”¨åŸŸå/basename/&#39;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">return</span> code
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ğŸ‘‡-æ•°æ®é€šä¿¡" tabindex="-1"><a class="header-anchor" href="#ğŸ‘‡-æ•°æ®é€šä¿¡"><span>ğŸ‘‡ æ•°æ®é€šä¿¡</span></a></h3><p>æ²™ç®±å…³é—­åï¼Œå­åº”ç”¨é»˜è®¤çš„é€šä¿¡åŠŸèƒ½å¤±æ•ˆï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡æ‰‹åŠ¨æ³¨å†Œé€šä¿¡å¯¹è±¡å®ç°ä¸€è‡´çš„åŠŸèƒ½ã€‚</p><p><strong>æ³¨å†Œæ–¹å¼ï¼šåœ¨åŸºåº§åº”ç”¨ä¸­ä¸ºå­åº”ç”¨åˆå§‹åŒ–é€šä¿¡å¯¹è±¡</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> EventCenterForMicroApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@micro-zoe/micro-app&#39;</span>

<span class="token comment">// æ³¨æ„ï¼šæ¯ä¸ªviteå­åº”ç”¨æ ¹æ®appNameå•ç‹¬åˆ†é…ä¸€ä¸ªé€šä¿¡å¯¹è±¡</span>
window<span class="token punctuation">.</span>eventCenterForViteApp1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventCenterForMicroApp</span><span class="token punctuation">(</span>appName<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>viteå­åº”ç”¨å°±å¯ä»¥é€šè¿‡æ³¨å†Œçš„<code>eventCenterForViteApp1</code>å¯¹è±¡è¿›è¡Œé€šä¿¡ï¼Œå…¶apiå’Œ<code>window.microApp</code>ä¸€è‡´ï¼Œ<em>åŸºåº§é€šä¿¡æ–¹å¼æ²¡æœ‰ä»»ä½•å˜åŒ–ã€‚</em></p><p><strong>å­åº”ç”¨é€šä¿¡æ–¹å¼ï¼š</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * ç»‘å®šç›‘å¬å‡½æ•°
 * dataListener: ç»‘å®šå‡½æ•°
 * autoTrigger: åœ¨åˆæ¬¡ç»‘å®šç›‘å¬å‡½æ•°æ—¶æœ‰ç¼“å­˜æ•°æ®ï¼Œæ˜¯å¦éœ€è¦ä¸»åŠ¨è§¦å‘ä¸€æ¬¡ï¼Œé»˜è®¤ä¸ºfalse
 */</span>
window<span class="token punctuation">.</span>eventCenterForViteApp1<span class="token punctuation">.</span><span class="token function">addDataListener</span><span class="token punctuation">(</span><span class="token function-variable function">dataListener</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">data</span><span class="token operator">:</span> Object</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">,</span> autoTrigger<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">)</span>

<span class="token comment">// è§£ç»‘æŒ‡å®šå‡½æ•°</span>
window<span class="token punctuation">.</span>eventCenterForViteApp1<span class="token punctuation">.</span><span class="token function">removeDataListener</span><span class="token punctuation">(</span>dataListener<span class="token punctuation">)</span>

<span class="token comment">// æ¸…ç©ºå½“å‰å­åº”ç”¨çš„æ‰€æœ‰ç»‘å®šå‡½æ•°(å…¨å±€æ•°æ®å‡½æ•°é™¤å¤–)</span>
window<span class="token punctuation">.</span>eventCenterForViteApp1<span class="token punctuation">.</span><span class="token function">clearDataListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// ä¸»åŠ¨è·å–æ•°æ®</span>
window<span class="token punctuation">.</span>eventCenterForViteApp1<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// å­åº”ç”¨å‘åŸºåº§åº”ç”¨å‘é€æ•°æ®</span>
window<span class="token punctuation">.</span>eventCenterForViteApp1<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;å­åº”ç”¨å‘é€çš„æ•°æ®&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">æ³¨æ„</p><ol><li>è¯·ç¡®ä¿viteç‰ˆæœ¬&gt;=2.5.0</li><li>é€‚é…viteæœ¬è´¨ä¸Šæ˜¯é€‚é…moduleè„šæœ¬ï¼Œå…¶å®ƒéviteæ„å»ºçš„moduleè„šæœ¬ä¹Ÿå¯ä»¥é‡‡ç”¨ç›¸åŒçš„æ€è·¯å¤„ç†ã€‚</li></ol></div><h2 id="å®æˆ˜æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#å®æˆ˜æ¡ˆä¾‹"><span>å®æˆ˜æ¡ˆä¾‹</span></a></h2><p>ä»¥ä¸Šä»‹ç»äº†viteå¦‚ä½•æ¥å…¥å¾®å‰ç«¯ï¼Œä½†åœ¨å®é™…ä½¿ç”¨ä¸­ä¼šæ¶‰åŠæ›´å¤šåŠŸèƒ½ï¼Œå¦‚æ•°æ®é€šä¿¡ã€è·¯ç”±è·³è½¬ã€æ‰“åŒ…éƒ¨ç½²ï¼Œä¸ºæ­¤æˆ‘ä»¬æä¾›äº†ä¸€å¥—æ¡ˆä¾‹ï¼Œç”¨äºå±•ç¤ºviteä½œä¸ºåŸºåº§åµŒå…¥(æˆ–ä½œä¸ºå­åº”ç”¨è¢«åµŒå…¥) reactã€vueã€angularã€viteã€nextjsã€nuxtjsç­‰æ¡†æ¶ï¼Œåœ¨æ¡ˆä¾‹ä¸­æˆ‘ä»¬ä½¿ç”¨å°½å¯èƒ½å°‘çš„ä»£ç å®ç°å°½å¯èƒ½å¤šçš„åŠŸèƒ½ã€‚</p><p>æ¡ˆä¾‹åœ°å€ï¼šhttps://github.com/micro-zoe/micro-app-demo-0.x</p>`,40);function b(g,h){const a=p("ExternalLinkIcon");return e(),o("div",null,[u,n("div",r,[d,k,n("p",null,[s("åœ¨1.0å…¬æµ‹ç‰ˆä¸­æˆ‘ä»¬æ¨å‡ºäº†ä¸ºviteæ‰“é€ çš„æ²™ç®±æ–¹æ¡ˆï¼Œå¯¹äºæ–°æ¥å…¥çš„é¡¹ç›®ï¼Œæ¨èä½¿ç”¨æ–°çš„æ–¹æ¡ˆï¼Œå…·ä½“è¯¦æƒ…è¯·è·³è½¬"),n("a",v,[s("1.0å…¬æµ‹ç‰ˆæ–‡æ¡£"),c(a)]),s("ã€‚")])]),m])}const y=t(l,[["render",b],["__file","vite.html.vue"]]);export{y as default};
